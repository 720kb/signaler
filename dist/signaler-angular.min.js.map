{"version":3,"file":"signaler-angular.min.js","sources":["../src/js/signaler.js","../src/angular/signaler.js"],"names":["window","Signaler","url","mediaConstr","sdpConstr","debug","comunicator","debugMode","myStream","getUserMediaConstraints","audio","video","sdpConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","rtcConfiguration","iceServers","urls","rtcOptions","rtcDataChannelOptions","initiators","iceCandidates","peerConnections","dataChannels","approvedUsers","unknownPeerValue","generateError","error","domEventToDispatch","CustomEvent","detail","dispatchEvent","onCreateOfferError","console","onSetLocalDescriptionError","onDataChannelError","channel","who","onSetRemoteDescriptionError","onCreateAnswerError","onAddIceCandidateError","onGetUserMediaError","onAddIceCandidateSuccess","theComunicator","info","onDataChannelMessage","event","data","String","indexOf","addStream","eventToSend","payload","whoami","onDataChannelOpen","this","send","onDataChannelClose","Object","keys","onDataChannelArrive","onDataChannelErrorBoundedToChannelAndWho","bind","onDataChannelMessageBoundedToChannelAndWho","onDataChannelOpenBoundedToChannelAndWho","onDataChannelCloseBoundedToChannelAndWho","onerror","onmessage","onopen","onclose","onSetLocalDescriptionSuccess","type","toSend","sendTo","onAnswer","answer","onSetLocalDescriptionSuccessBoundedToComunicatorAndWhoAndChannelAndAnswerAndType","setLocalDescription","RTCSessionDescription","onSetRemoteDescription","role","onAnswerBoundedToComunicatorAndChannelAndWho","createAnswer","onCreateOffer","offer","onSetLocalDescriptionSuccessBoundedToComunicatorAndWhoAndChannelAndOfferAndType","setRemoteDescription","onSetRemoteDescriptionBoundedToComunicatorAndChannelAndWhoAndRole","onIceCandidate","candidate","push","trace","Array","isArray","currentIceCandidates","candidates","splice","length","whoAmI","onSignalingStateChange","target","signalingState","onIceConnectionStateChange","iceConnectionState","onAddStream","stream","aPeerConnectedToChannel","peersConnectedToChannel","peersConnectedToChannelIndex","peersConnectedToChannelLength","userid","onRemoveStream","onNegotiationNeeded","onCreateOfferBoundedToComunicatorAndChannelAndWho","createOffer","onLocalStream","localStream","initRTCPeerConnection","initChannel","aPeerConnection","onIceCandidateBoundedToComunicatorAndChannelAndWho","onAddStreamBoundedToChannel","onRemoveStreamBoundedToChannel","onNegotiationNeededBoundedToComunicatorAndChannelAndWho","onIceConnectionStateChangeBoundedToComunicatorAndChannelAndWho","onDataChannelArriveBoundedToChannelAndWho","onSignalingStateChangeBoundedToComunicatorAndChannelAndWho","aDataCannel","RTCPeerConnection","createDataChannel","onicecandidate","onaddstream","onremovestream","onnegotiationneeded","oniceconnectionstatechange","ondatachannel","onsignalingstatechange","createChannel","joinChannel","getUserMedia","onLocalStreamBoundedOnComunicator","streamOnChannel","aUserInChannel","usersInChannel","usersInChannelIndex","usersInChannelLength","broadcast","aUserDataChannel","approve","whoToApprove","isNaN","Number","warn","unApprove","whoToUnApprove","arrivedToMe","what","candidatesIndex","onAddIceCandidateSuccessBoundedToComunicatorAndChannelAndWho","approvedUserIndex","eventArrived","eventType","call","addIceCandidate","RTCIceCandidate","leaveChannel","close","users","forEach","anElement","removeStream","keepMyStream","aPeerInChannelName","peersInChannel","peersInChannelNames","peersInChannelNamesLength","peersInChannelIndex","stop","undefined","removeEventListener","onComunicatorResolved","resolve","createChannelBoundedToComunicator","joinChannelBoundedToComunicator","getUserMediaBoundedToComunicator","streamOnChannelBoundedToComunicator","sendToBounded","broadcastBounded","approveBoundedToComunicator","unApproveBoundedToComunicator","leaveChannelBoundedToComunicator","arrivedToMeBoundedToComunicator","toResolve","userIsPresent","defineProperties","get","addEventListener","deferred","then","Comunicator","Promise","_getPeers","_getDataChannels","_getIceCandidates","_getInititators","_getApprovedUsers","angular","module","provider","signaler","initSignaler","urlOrComunicator","getUserMediaConst","sdpConst","$get","$rootScope","$window","$log","onError","$apply","scope","$emit","onDataArrived","onDataChannelOpened","onDataChannelClosed","onSignalerReady","onStreamArrive","onStreamEnd","onMyStream","$on"],"mappings":"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"}