{"version":3,"file":"signaler-angular.min.js","sources":["../src/js/signaler.js","../src/angular/signaler.js"],"names":["window","Signaler","url","mediaConstr","sdpConstr","comunicator","myStream","getUserMediaConstraints","audio","video","sdpConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","rtcConfiguration","iceServers","urls","rtcOptions","rtcDataChannelOptions","initiators","iceCandidates","peerConnections","dataChannels","approvedUsers","unknownPeerValue","generateError","error","domEventToDispatch","CustomEvent","detail","dispatchEvent","onCreateOfferError","console","onSetLocalDescriptionError","onDataChannelError","channel","who","onSetRemoteDescriptionError","onCreateAnswerError","onAddIceCandidateError","onGetUserMediaError","onAddIceCandidateSuccess","theComunicator","info","onDataChannelMessage","event","data","String","indexOf","addStream","eventToSend","payload","whoami","debug","onDataChannelOpen","this","send","onDataChannelClose","Object","keys","onDataChannelArrive","onDataChannelErrorBoundedToChannelAndWho","bind","onDataChannelMessageBoundedToChannelAndWho","onDataChannelOpenBoundedToChannelAndWho","onDataChannelCloseBoundedToChannelAndWho","onerror","onmessage","onopen","onclose","onSetLocalDescriptionSuccess","type","toSend","sendTo","onAnswer","answer","onSetLocalDescriptionSuccessBoundedToComunicatorAndWhoAndChannelAndAnswerAndType","setLocalDescription","RTCSessionDescription","onSetRemoteDescription","role","onAnswerBoundedToComunicatorAndChannelAndWho","createAnswer","onCreateOffer","offer","onSetLocalDescriptionSuccessBoundedToComunicatorAndWhoAndChannelAndOfferAndType","setRemoteDescription","onSetRemoteDescriptionBoundedToComunicatorAndChannelAndWhoAndRole","onIceCandidate","candidate","push","trace","Array","isArray","currentIceCandidates","candidates","splice","length","whoAmI","onSignalingStateChange","target","signalingState","onIceConnectionStateChange","iceConnectionState","onAddStream","stream","aPeerConnectedToChannel","peersConnectedToChannel","peersConnectedToChannelIndex","peersConnectedToChannelLength","userid","onRemoveStream","onNegotiationNeeded","onCreateOfferBoundedToComunicatorAndChannelAndWho","createOffer","onLocalStream","localStream","initRTCPeerConnection","initChannel","aPeerConnection","onIceCandidateBoundedToComunicatorAndChannelAndWho","onAddStreamBoundedToChannel","onRemoveStreamBoundedToChannel","onNegotiationNeededBoundedToComunicatorAndChannelAndWho","onIceConnectionStateChangeBoundedToComunicatorAndChannelAndWho","onDataChannelArriveBoundedToChannelAndWho","onSignalingStateChangeBoundedToComunicatorAndChannelAndWho","aDataCannel","RTCPeerConnection","createDataChannel","onicecandidate","onaddstream","onremovestream","onnegotiationneeded","oniceconnectionstatechange","ondatachannel","onsignalingstatechange","createChannel","joinChannel","getUserMedia","onLocalStreamBoundedOnComunicator","streamOnChannel","aUserInChannel","usersInChannel","usersInChannelIndex","usersInChannelLength","broadcast","aUserDataChannel","approve","whoToApprove","isNaN","Number","warn","unApprove","whoToUnApprove","arrivedToMe","what","candidatesIndex","onAddIceCandidateSuccessBoundedToComunicatorAndChannelAndWho","approvedUserIndex","eventArrived","eventType","call","addIceCandidate","RTCIceCandidate","leaveChannel","close","users","forEach","anElement","removeStream","keepMyStream","aPeerInChannelName","peersInChannel","peersInChannelNames","peersInChannelNamesLength","peersInChannelIndex","stop","undefined","removeEventListener","onComunicatorResolved","resolve","createChannelBoundedToComunicator","joinChannelBoundedToComunicator","getUserMediaBoundedToComunicator","streamOnChannelBoundedToComunicator","sendToBounded","broadcastBounded","approveBoundedToComunicator","unApproveBoundedToComunicator","leaveChannelBoundedToComunicator","arrivedToMeBoundedToComunicator","toResolve","userIsPresent","defineProperties","get","addEventListener","deferred","then","Comunicator","Promise","_getPeers","_getDataChannels","_getIceCandidates","_getInititators","_getApprovedUsers","angular","module","provider","signaler","initSignaler","urlOrComunicator","getUserMediaConst","sdpConst","$get","$rootScope","$window","$log","onError","$apply","scope","$emit","onDataArrived","onDataChannelOpened","onDataChannelClosed","onSignalerReady","onStreamArrive","onStreamEnd","onMyStream","$on"],"mappings":"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"}